{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jonatasfrost/Documents/Cursos/reactJS/filmow/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jonatasfrost/Documents/Cursos/reactJS/filmow/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jonatasfrost/Documents/Cursos/reactJS/filmow/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{toast}from\"react-toastify\";import api from'../../services/api';import'./filme.css';// https://api.themoviedb.org/3/movie/505642?api_key=f9261560796a63450d2e55fa40ded231\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Filme(){var _useParams=useParams(),id=_useParams.id;var navigation=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),filme=_useState2[0],setFilme=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){function loadFilm(){return _loadFilm.apply(this,arguments);}function _loadFilm(){_loadFilm=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return api.get(\"/movie/\".concat(id),{params:{api_key:\"f9261560796a63450d2e55fa40ded231\",language:\"pt-BR\"}}).then(function(response){setFilme(response.data);setLoading(false);}).catch(function(){console.log(\"Filme não encontrado\");navigation('/',{replace:true});return;});case 2:case\"end\":return _context.stop();}},_callee);}));return _loadFilm.apply(this,arguments);}loadFilm();return function(){console.log(\"Componente desmontado\");};},[navigation,id]);function salvarFilme(){var minhaLista=localStorage.getItem(\"@filmow\");var filmesSalvos=JSON.parse(minhaLista)||[];var hasFilme=filmesSalvos.some(function(filmesSalvo){return filmesSalvo.id===filme.id;});if(hasFilme){toast.error(\"Esse filme já está na sua lista!\");return;}filmesSalvos.push(filme);localStorage.setItem(\"@filmow\",JSON.stringify(filmesSalvos));toast.success(\"Filme salvo com sucesso!\");}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"filme-info\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Carregando detalhes do filme...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"filme-info\",children:[/*#__PURE__*/_jsx(\"h1\",{children:filme.title}),/*#__PURE__*/_jsx(\"img\",{src:\"https://image.tmdb.org/t/p/original/\".concat(filme.backdrop_path),alt:filme.title}),/*#__PURE__*/_jsx(\"h3\",{children:\"Sinopse\"}),/*#__PURE__*/_jsx(\"span\",{children:filme.overview}),/*#__PURE__*/_jsxs(\"strong\",{children:[\"Avalia\\xE7\\xE3o: \",filme.vote_average,\" /10\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"area-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:salvarFilme,children:\"Salvar\"}),/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",rel:\"external\",href:\"https://youtube.com/results?search_query=\".concat(filme.title,\" Trailer\"),children:\"Trailer\"})})]})]});}export default Filme;","map":{"version":3,"names":["useEffect","useState","useParams","useNavigate","toast","api","Filme","id","navigation","filme","setFilme","loading","setLoading","loadFilm","get","params","api_key","language","then","response","data","catch","console","log","replace","salvarFilme","minhaLista","localStorage","getItem","filmesSalvos","JSON","parse","hasFilme","some","filmesSalvo","error","push","setItem","stringify","success","title","backdrop_path","overview","vote_average"],"sources":["/Users/jonatasfrost/Documents/Cursos/reactJS/filmow/src/pages/Filme/index.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\n\nimport api from '../../services/api'\nimport './filme.css';\n\n// https://api.themoviedb.org/3/movie/505642?api_key=f9261560796a63450d2e55fa40ded231\nfunction Filme(){\n    const {id} = useParams();\n    const navigation = useNavigate();\n    const [filme, setFilme] = useState({});\n    const [loading, setLoading] = useState(true);\n    \n\n    useEffect(()=>{\n        async function loadFilm(){\n            await api.get(`/movie/${id}`,{\n                params:{\n                    api_key: \"f9261560796a63450d2e55fa40ded231\",\n                    language: \"pt-BR\",\n                }\n            })\n            .then((response)=>{\n                setFilme(response.data);\n                setLoading(false);\n            })\n            .catch(()=>{\n                console.log(\"Filme não encontrado\");\n                navigation('/',{replace: true});\n                return;\n            })\n        }\n        loadFilm();\n\n        return () => {\n            console.log(\"Componente desmontado\");\n        }\n\n        \n    },[navigation, id])\n\n    function salvarFilme(){\n        const minhaLista = localStorage.getItem(\"@filmow\");\n\n        let filmesSalvos = JSON.parse(minhaLista) || [];\n\n        const hasFilme = filmesSalvos.some((filmesSalvo)=>filmesSalvo.id === filme.id)\n\n        if(hasFilme){\n            toast.error(\"Esse filme já está na sua lista!\");\n            return;\n        }\n\n        filmesSalvos.push(filme);\n        localStorage.setItem(\"@filmow\", JSON.stringify(filmesSalvos));\n        toast.success(\"Filme salvo com sucesso!\");\n    }\n\n    if(loading){\n        return(\n            <div className=\"filme-info\">\n                <h1>Carregando detalhes do filme...</h1>\n            </div>\n        )\n    }\n\n    return(\n        <div className=\"filme-info\">\n            <h1>{filme.title}</h1>\n            <img src={`https://image.tmdb.org/t/p/original/${filme.backdrop_path}`} alt={filme.title} />\n\n            <h3>Sinopse</h3>\n            <span>{filme.overview}</span>\n            <strong>Avaliação: {filme.vote_average} /10</strong>\n\n            <div className=\"area-buttons\">\n                <button onClick={salvarFilme}>Salvar</button>\n                <button>\n                    <a target=\"_blank\" rel=\"external\" href={`https://youtube.com/results?search_query=${filme.title} Trailer`}>Trailer</a>\n                </button>\n            </div>\n        </div>\n    )\n}\n\nexport default Filme;"],"mappings":"2aAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,KAAK,KAAQ,gBAAgB,CAEtC,MAAOC,IAAG,KAAM,oBAAoB,CACpC,MAAO,aAAa,CAEpB;AAAA,wFACA,QAASC,MAAK,EAAE,CACZ,eAAaJ,SAAS,EAAE,CAAjBK,EAAE,YAAFA,EAAE,CACT,GAAMC,WAAU,CAAGL,WAAW,EAAE,CAChC,cAA0BF,QAAQ,CAAC,CAAC,CAAC,CAAC,wCAA/BQ,KAAK,eAAEC,QAAQ,eACtB,eAA8BT,QAAQ,CAAC,IAAI,CAAC,yCAArCU,OAAO,eAAEC,UAAU,eAG1BZ,SAAS,CAAC,UAAI,SACKa,SAAQ,oIAAvB,0JACUR,IAAG,CAACS,GAAG,kBAAWP,EAAE,EAAG,CACzBQ,MAAM,CAAC,CACHC,OAAO,CAAE,kCAAkC,CAC3CC,QAAQ,CAAE,OACd,CACJ,CAAC,CAAC,CACDC,IAAI,CAAC,SAACC,QAAQ,CAAG,CACdT,QAAQ,CAACS,QAAQ,CAACC,IAAI,CAAC,CACvBR,UAAU,CAAC,KAAK,CAAC,CACrB,CAAC,CAAC,CACDS,KAAK,CAAC,UAAI,CACPC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC,CACnCf,UAAU,CAAC,GAAG,CAAC,CAACgB,OAAO,CAAE,IAAI,CAAC,CAAC,CAC/B,OACJ,CAAC,CAAC,sDACL,2CACDX,QAAQ,EAAE,CAEV,MAAO,WAAM,CACTS,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC,CACxC,CAAC,CAGL,CAAC,CAAC,CAACf,UAAU,CAAED,EAAE,CAAC,CAAC,CAEnB,QAASkB,YAAW,EAAE,CAClB,GAAMC,WAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAElD,GAAIC,aAAY,CAAGC,IAAI,CAACC,KAAK,CAACL,UAAU,CAAC,EAAI,EAAE,CAE/C,GAAMM,SAAQ,CAAGH,YAAY,CAACI,IAAI,CAAC,SAACC,WAAW,QAAGA,YAAW,CAAC3B,EAAE,GAAKE,KAAK,CAACF,EAAE,GAAC,CAE9E,GAAGyB,QAAQ,CAAC,CACR5B,KAAK,CAAC+B,KAAK,CAAC,kCAAkC,CAAC,CAC/C,OACJ,CAEAN,YAAY,CAACO,IAAI,CAAC3B,KAAK,CAAC,CACxBkB,YAAY,CAACU,OAAO,CAAC,SAAS,CAAEP,IAAI,CAACQ,SAAS,CAACT,YAAY,CAAC,CAAC,CAC7DzB,KAAK,CAACmC,OAAO,CAAC,0BAA0B,CAAC,CAC7C,CAEA,GAAG5B,OAAO,CAAC,CACP,mBACI,YAAK,SAAS,CAAC,YAAY,uBACvB,oBAAI,iCAA+B,EAAK,EACtC,CAEd,CAEA,mBACI,aAAK,SAAS,CAAC,YAAY,wBACvB,oBAAKF,KAAK,CAAC+B,KAAK,EAAM,cACtB,YAAK,GAAG,+CAAyC/B,KAAK,CAACgC,aAAa,CAAG,CAAC,GAAG,CAAEhC,KAAK,CAAC+B,KAAM,EAAG,cAE5F,oBAAI,SAAO,EAAK,cAChB,sBAAO/B,KAAK,CAACiC,QAAQ,EAAQ,cAC7B,0BAAQ,mBAAW,CAACjC,KAAK,CAACkC,YAAY,CAAC,MAAI,GAAS,cAEpD,aAAK,SAAS,CAAC,cAAc,wBACzB,eAAQ,OAAO,CAAElB,WAAY,UAAC,QAAM,EAAS,cAC7C,qCACI,UAAG,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,oDAA8ChB,KAAK,CAAC+B,KAAK,YAAW,UAAC,SAAO,EAAI,EACjH,GACP,GACJ,CAEd,CAEA,cAAelC,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}